# Kohana Minion completion by Evan Purkhiser <evanpurkhiser@gmail.com>

_minion_complete_tasks()
{
	local script tasks current

	# Get the path to the minion script
	script="$(echo "${COMP_LINE}" | awk '{print $1}')"

	# Get the tasks from them minion script
	tasks="$(echo "$(${script})" | grep \\* | awk '{print $2}')"

	current="$(_get_cword :)"

	# Generate the suggested tasks
	COMPREPLY=( $(compgen -W "${tasks}" -- "${current}") )
	__ltrim_colon_completions "${current}"
}

complete -F _minion_complete_tasks minion
