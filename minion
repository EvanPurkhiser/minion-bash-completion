# Kohana Minion completion by Evan Purkhiser <evanpurkhiser@gmail.com>

_minion_complete_tasks()
{
	local script tasks

	# Get the path to the minion script
	script="$(echo "${COMP_LINE}" | awk '{print $1}')"

	# Get the tasks from them minion script
	tasks="$(echo "$(${script})" | grep \\* | awk '{print $2}')"

	# Generate the suggested tasks
	COMPREPLY=( $(compgen -W "${tasks}" -- "${COMP_WORDS[COMP_CWORD]}") )
	return 0
}

complete -F _minion_complete_tasks minion
